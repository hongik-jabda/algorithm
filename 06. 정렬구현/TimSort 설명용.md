# TimSort

> TimSort는 자바, 파이썬, V8 엔진에서 기본으로 사용하는 정렬 방식이다.
>
> V8 엔진이 곧 NodeJS이니 모든 자바스크립트도 이 정렬방식을 사용한다고 생각해도 무방하다.
>
> TimSort는 간단하게 말해서, MergeSort이긴 하나, 덩어리들을 나누는 방식에서 Binary Insertion Sort를 사용하는 것이다.
>
> 이를 통해 적은 범위(보통은 64로 설정)에서의 정렬은 BIS에 의해 최적화되고,
> 큰 범위에서의 정렬은 MS에 의해 최적화된다.

- 2 11 12 6 1 8 3 13 15 5 9 14 7 10 4 16
- 위 배열을 한번 정렬해보자.
- minRun = 4라고 설정한다.

## [STEP 1] Binary Insertion Sort를 통해 RUN들로 나눈다.

- RUN 1
    - 2 11 12 : 상승하는 추세
    - 2 6 11 12 : minRun에 의해 설정되는 run, 이진 삽입 정렬 사용
- RUN 2
    - 1 8 : 상승하는 추세
    - 1 3 8 13 : minRun에 의해 설정되는 run, 이진 삽입 정렬 사용
    - 1 3 8 13 15 : 이후에 추가적으로 증가하므로 설정되는 run, 이진 삽입 정렬 사용
- RUN 3
    - 5 9 14 : 상승하는 추세
    - 5 7 9 14 : minRun에 의해 설정되는 run, 이진 삽입 정렬 사용
- RUN 4
    - 10 4 : 하락하는 추세
    - 16 10 4 : minRun에 의해 설정되는 run
- 결과
    - 2 6 11 12 : 상승 추세, RUN 1
    - 1 3 8 13 15 : 상승 추세, RUN 2
    - 5 7 9 14 : 상승 추세, RUN 3
    - 16 10 4 : 하락 추세, RUN 4

## [STEP 2] 하락 추세 RUN을 뒤집는다.

- RUN 4가 하락 추세이므로 이를 뒤집는다.
- 결과
    - 2 6 11 12 : 상승 추세, RUN 1
    - 1 3 8 13 15 : 상승 추세, RUN 2
    - 5 7 9 14 : 상승 추세, RUN 3
    - 4 10 16 : 상승 추세, RUN 4

## [STEP 3] 병합한다.

- RUN 1, RUN 2 병합
    - 1 2 3 6 8 11 12 13 15 : MERGE 1
- RUN 3, RUN 4 병합
    - 4 5 7 9 10 14 16 : MERGE 2
- MERGE 1, MERGE 2 병합
    - 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
- 종료

## 시간 비교

|   종류    |  최적   |  평균   |  최악   |
|:-------:|:-----:|:-----:|:-----:|
|   BIS   |   N   |  N^2  |  N^2  |
|   MS    | NlogN | NlogN | NlogN |
| TimSort |   N   | NlogN | NlogN |
